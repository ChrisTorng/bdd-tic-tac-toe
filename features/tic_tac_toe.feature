# language: zh-CN
功能: 井字遊戲網站
  為了讓玩家可以與另一位玩家或電腦對戰
  身為訪客
  我想要使用一個能顯示遊戲狀態並提供互動的井字遊戲網站

  背景: 瀏覽遊戲首頁
    假如 我開啟井字遊戲網站
    那麼 我應該看到標題 "井字遊戲"
    而且 我應該看到說明文字 "輪到 X" 以提示目前的玩家

  場景: 顯示初始棋盤
    當 網站載入完成
    那麼 我應該看到 3x3 的棋盤格
    而且 每個格子都應該是空白的
    而且 棋盤下方應該顯示「重設遊戲」按鈕

  場景: 顯示對手與難度設定
    當 網站載入完成
    那麼 我應該看到對手模式切換，提供「雙人對戰」與「與電腦對戰」選項
    而且 我應該看到先手選擇器，提供「玩家先手」與「電腦先手」
    而且 我應該看到難度選擇器，包含「簡單」、「中等」、「困難」
    而且 難度選擇器的預設值應為「簡單」
    當 我選擇「與電腦對戰」模式
    那麼 難度選擇器應啟用
    而且 我應該看到難度說明「簡單：隨機落子、中等：優先防守、困難：最佳策略」

  場景: X 玩家先手並輪流下子
    當 我點擊第一列第一格
    那麼 該格應該顯示 "X"
    而且 狀態顯示應更新為 "輪到 O"
    當 我點擊第二列第二格
    那麼 該格應顯示 "O"
    而且 狀態顯示應更新為 "輪到 X"

  場景: 與電腦對戰時可選擇先手
    假如 我選擇「與電腦對戰」模式
    當 我選擇「玩家先手」
    那麼 狀態顯示應為「輪到 X (玩家)」
    當 我選擇「電腦先手」
    那麼 棋盤上應立即顯示電腦在一個空格放置「X」
    而且 狀態顯示應為「輪到 O (玩家)」

  場景: 不允許覆蓋已佔用的格子
    假如 第一列第一格已經顯示 "X"
    當 我再次點擊第一列第一格
    那麼 該格內容應保持為 "X"
    而且 我應該看到錯誤提示 "此格已被佔用"
    而且 狀態顯示仍應為 "輪到 O"

  場景大綱: 偵測玩家勝利
    假如 棋盤目前局勢為
      | 列 | 行1 | 行2 | 行3 |
      | 1  | <r1c1> | <r1c2> | <r1c3> |
      | 2  | <r2c1> | <r2c2> | <r2c3> |
      | 3  | <r3c1> | <r3c2> | <r3c3> |
    而且 狀態顯示為 "輪到 <current_player>"
    當 我在第 <move_row> 列第 <move_col> 格下子
    那麼 我應該看到訊息 "<winner> 獲勝"
    而且 勝利線上的格子應該被高亮顯示
    而且 狀態顯示應該改為 "遊戲結束"
    而且 棋盤上其他空格應停止回應點擊

    例子:
      | r1c1 | r1c2 | r1c3 | r2c1 | r2c2 | r2c3 | r3c1 | r3c2 | r3c3 | current_player | move_row | move_col | winner |
      | X    | X    | 空白 | O    | O    | 空白 | 空白 | 空白 | 空白 | X              | 1        | 3        | X      |
      | O    | 空白 | X    | O    | X    | 空白 | 空白 | 空白 | 空白 | O              | 3        | 1        | O      |

  場景: 偵測平手
    假如 棋盤所有格子都已填滿且沒有勝利線
    那麼 我應該看到訊息 "平手"
    而且 狀態顯示應改為 "遊戲結束"
    而且 不應再允許點擊任何格子

  場景: 簡單難度採用隨機策略
    假如 我選擇「與電腦對戰」模式
    而且 我選擇「電腦先手」
    而且 我選擇難度「簡單」
    當 我連續重設遊戲 3 次
    那麼 電腦第一次落子的格子應至少出現 2 個不同的位置
    而且 每次落子都必須發生在當前可用的空格

  場景: 中等難度優先阻擋玩家勝利
    假如 我選擇「與電腦對戰」模式
    而且 我選擇難度「中等」
    而且 狀態顯示為「輪到 O (電腦)」
    而且 棋盤目前局勢為
      | 列 | 行1 | 行2 | 行3 |
      | 1  | X | X | 空白 |
      | 2  | O | 空白 | 空白 |
      | 3  | 空白 | 空白 | 空白 |
    當 電腦行動
    那麼 電腦應該在第 1 列第 3 格放置「O」以阻擋玩家
    而且 其他格子應保持原狀

  場景大綱: 困難難度選擇最佳策略
    假如 我選擇「與電腦對戰」模式
    而且 我選擇難度「困難」
    而且 狀態顯示為「輪到 <current_player_label>」
    而且 棋盤目前局勢為
      | 列 | 行1 | 行2 | 行3 |
      | 1  | <r1c1> | <r1c2> | <r1c3> |
      | 2  | <r2c1> | <r2c2> | <r2c3> |
      | 3  | <r3c1> | <r3c2> | <r3c3> |
    當 電腦行動
    那麼 電腦應在第 <expected_row> 列第 <expected_col> 格放置「<computer_mark>」
    而且 此步應保證「<expected_outcome>」

    例子:
      | r1c1 | r1c2 | r1c3 | r2c1 | r2c2 | r2c3 | r3c1 | r3c2 | r3c3 | current_player_label | computer_mark | expected_row | expected_col | expected_outcome |
      | O    | O    | 空白 | X    | X    | 空白 | 空白 | 空白 | X    | O (電腦)             | O             | 1            | 3            | 電腦立即獲勝       |
      | X    | 空白 | 空白 | 空白 | O    | X    | 空白 | 空白 | 空白 | O (電腦)             | O             | 1            | 2            | 電腦至少逼和       |

  場景: 困難難度避免被迫落敗
    假如 我選擇「與電腦對戰」模式
    而且 我選擇難度「困難」
    而且 狀態顯示為「輪到 O (電腦)」
    而且 棋盤目前局勢為
      | 列 | 行1 | 行2 | 行3 |
      | 1  | X | 空白 | 空白 |
      | 2  | 空白 | O | 空白 |
      | 3  | 空白 | 空白 | X |
    當 電腦行動
    那麼 電腦的落子位置應符合最佳選擇列表
      | 列 | 行 |
      | 1  | 2  |
      | 2  | 1  |
      | 2  | 3  |
      | 3  | 2  |
    而且 落子後應維持可逼和的局勢

  場景: 重設遊戲
    假如 棋盤上已有至少一個格子顯示 "X"
    當 我點擊「重設遊戲」按鈕
    那麼 所有格子應該清空
    而且 狀態顯示應恢復為 "輪到 X"
    而且 勝負訊息應該被清除

  場景: 顯示對局紀錄
    假如 遊戲已經完成
    當 我點擊「查看紀錄」按鈕
    那麼 我應該看到一個模態窗顯示最近 5 場對局的結果
    而且 每場紀錄應包含勝方或平手、完成時間與步數
    而且 模態窗應提供「關閉」按鈕以返回棋盤
